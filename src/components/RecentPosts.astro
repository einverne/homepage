---
const { posts = [] } = Astro.props;
import { getLocale, getTranslations } from '@/utils/i18n';

const locale = getLocale(Astro.currentLocale);
const t = getTranslations(locale);
---

<section class="recent-posts">
  <div class="header">
    <h2>{t.common.latestPosts}</h2>
    <a class="more" href="https://blog.einverne.info" target="_blank" rel="noreferrer">{t.common.more}</a>
  </div>
  <ul>
    {posts.length === 0 && (
      <li class="empty">{t.common.emptyPosts}</li>
    )}
    {posts.map((post) => (
      <li>
        <a href={post.link} target="_blank" rel="noreferrer">
          <span class="title">{post.title}</span>
          {post.date && <span class="date">{post.date}</span>}
        </a>
      </li>
    ))}
  </ul>
</section>

<style>
.recent-posts {
  background: var(--color-content-bg);
  border: 1px solid color-mix(in srgb, var(--border-color) 45%, transparent);
  border-radius: 16px;
  padding: 20px 24px;
  box-shadow: 0 8px 24px var(--color-shadow);
  flex: 1 1 0;
  width: 100%;
  max-width: 100%;
  min-width: 0;
  box-sizing: border-box;
}

.header {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  margin-bottom: 12px;
}

.header h2 {
  font-size: 1.1rem;
  margin: 0;
}

.more {
  font-size: 0.85rem;
  color: var(--link-color);
  text-decoration: none;
}

ul {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
}

li a {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 12px;
  text-decoration: none;
  color: var(--text-color);
  padding: 8px 0px;
  border-radius: 10px;
  transition: background-color 0.2s ease, transform 0.2s ease;
}

li a:hover {
  background-color: color-mix(in srgb, var(--link-color) 10%, transparent);
  transform: translateX(2px);
}

.title {
  font-size: 0.95rem;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.date {
  font-size: 0.8rem;
  color: var(--motto-text-color);
  white-space: nowrap;
}

.empty {
  color: var(--motto-text-color);
  font-size: 0.9rem;
}
</style>
